# 文件描述符
文件描述符是操作系统中用于标识一个打开的文件的整数值。在C++中，我们通常使用文件描述符来进行文件的读写操作。
文件描述符是一个非负的整数，其中**0、1、2是系统保留的标准输入、标准输出和标准错误输出**的文件描述符。

# I/O多路复用
## 同步阻塞总结

单线程：某个socket阻塞，会影响到其他socket处理

多线程：客户端较多时，会造成资源浪费，全部socket中可能每个时刻只有几个就绪。同时，线程的调度、上下文切换乃至它们占用的内存，可能都成为瓶颈。
## 同步非阻塞总结

从操作系统层面解决了阻塞问题

优点：单个socket阻塞，不会影响到其他socket

缺点：需要不断的遍历进行系统调用，有一定开销

## select

```
/**
* 函数原型
* 获取就绪事件
*
* @param nfds      3个监听集合的文件描述符最大值+1
* @param readfds   要监听的可读文件描述符集合
* @param writefds  要监听的可写文件描述符集合
* @param exceptfds 要监听的异常文件描述符集合
* @param timeout   本次调用的超时时间 等于0时：不等待； 等于-1时：无限等待
* @return          大于0：已就绪的文件描述符数量； 等于0：超时； 小于0：出错
**/

int select(int nfds, fd_set* readfds, fd_set* writefds, fd_set* exceptfds, struct timeval* timeout);
```
总结：

将socket是否就绪检查逻辑下沉到操作系统层面，避免大量系统调用。告诉你有事件就绪，但没告诉你具体是哪个FD。

优点：
不需要每个FD都进行一次系统调用，解决了频繁的用户态内核态切换问题

缺点：
单进程监听的FD存在限制，默认1024
每次调用都需要将FD从用户态拷贝到内核态
不知道具体是哪个文件描述符就绪，需要遍历全部文件描述符
入参的3个 fd_set集合每次调用都需要重置


